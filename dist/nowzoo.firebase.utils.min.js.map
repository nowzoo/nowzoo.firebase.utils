{"version":3,"sources":["nowzoo.firebase.utils.min.js"],"names":["angular","module","factory","$window","$firebaseAuth","$firebaseObject","$firebaseArray","_appReference","_appAuth","setApplicationReference","url","Firebase","getApplicationReference","getApplicationAuth","onError","err","this","__securityError","log_firebase","console","log","$ref","toString","ObjectFactory","$extend","$$error","ArrayFactory","childReference","paths","child","forEach","arguments","val","isArray","str","s","getObject","ref","getRefObject","getArray","getRefArray"],"mappings":"AAAAA,QAAQC,OAAO,yBAA0B,aAEzCD,QAAQC,OAAO,yBACVC,QAAQ,qBAAsB,UAAW,gBAAiB,kBAAmB,iBAAkB,SAASC,EAASC,EAAeC,EAAiBC,GAC9I,GAAIC,GAAgB,KAChBC,EAAW,KAEXC,EAA0B,SAASC,GAEnC,MADAH,GAAgB,GAAIJ,GAAQQ,SAASD,IAIrCE,EAA0B,WAC1B,MAAOL,IAGPM,EAAqB,WAIrB,MAHML,KACFA,EAAWJ,EAAcQ,MAEtBJ,GAGPM,EAAU,SAASC,GACnBC,KAAKC,iBAAkB,EACnBd,EAAQe,cACRC,QAAQC,IAAIL,EAAKC,KAAKK,OAAOC,aAKjCC,EAAgBlB,EAAgBmB,SAASC,QAASX,IAElDY,EAAepB,EAAekB,SAASC,QAASX,IAOhDa,EAAiB,SAASC,GAC1B,GAAIC,GAAQjB,GAYZ,OAXAZ,SAAQ8B,QAAQC,UAAW,SAASC,GAChC,GAAIhC,QAAQiC,QAAQD,GAChBhC,QAAQ8B,QAAQE,EAAK,SAASE,GAC1B,GAAIC,GAAID,EAAIZ,UACZO,GAAQA,EAAMA,MAAMM,SAErB,CACH,GAAIA,GAAIH,EAAIV,UACZO,GAAQA,EAAMA,MAAMM,MAGrBN,GAQPO,EAAY,SAASR,GACrB,GAAIS,GAAMV,EAAeC,EAEzB,OAAO,IAAIL,GAAcc,IAOzBC,EAAe,SAASD,GACxB,MAAO,IAAId,GAAcc,IAQzBE,EAAW,SAASX,GACpB,GAAIS,GAAMV,EAAeC,EAEzB,OAAO,IAAIF,GAAaW,IAOxBG,EAAc,SAASH,GACvB,MAAO,IAAIX,GAAaW,GAI5B,QACIzB,wBAAyBA,EACzBH,wBAAyBA,EACzBI,mBAAoBA,EACpBc,eAAgBA,EAChBS,UAAWA,EACXG,SAAUA,EACVC,YAAaA,EACbF,aAAcA","file":"nowzoo.firebase.utils.min.js","sourcesContent":["angular.module('nowzoo.firebase.utils', ['firebase']);\n\nangular.module('nowzoo.firebase.utils')\n    .factory('firebaseUtilities', [\"$window\", \"$firebaseAuth\", \"$firebaseObject\", \"$firebaseArray\", function($window, $firebaseAuth, $firebaseObject, $firebaseArray){\n        var _appReference = null;\n        var _appAuth = null;\n\n        var setApplicationReference = function(url){\n            _appReference = new $window.Firebase(url);\n            return _appReference;\n        };\n\n        var getApplicationReference = function(){\n            return _appReference;\n        };\n\n        var getApplicationAuth = function(){\n            if (! _appAuth){\n                _appAuth = $firebaseAuth(getApplicationReference());\n            }\n            return _appAuth;\n        };\n\n        var onError = function(err){\n            this.__securityError = true;\n            if ($window.log_firebase){\n                console.log(err, this.$ref().toString());\n            }\n        };\n\n\n        var ObjectFactory = $firebaseObject.$extend({$$error: onError});\n\n        var ArrayFactory = $firebaseArray.$extend({$$error: onError});\n\n        /**\n         * Returns the a child firebase reference based on an array of paths\n         * @param paths\n         * @returns {{}}\n         */\n        var childReference = function(paths){\n            var child = getApplicationReference();\n            angular.forEach(arguments, function(val){\n                if (angular.isArray(val)){\n                    angular.forEach(val, function(str){\n                        var s = str.toString();\n                        child = child.child(s);\n                    });\n                } else {\n                    var s = val.toString();\n                    child = child.child(s);\n                }\n            });\n            return child;\n        };\n\n        /**\n         * Returns a $firebaseObject based on an array of paths\n         * @param paths\n         * @returns {Function}\n         */\n        var getObject = function(paths){\n            var ref = childReference(paths);\n            /*jshint newcap: false */\n            return new ObjectFactory(ref);\n        };\n        /**\n         * Returns a $firebaseObject based on a firebase ref\n         * @param ref\n         * @returns {Function}\n         */\n        var getRefObject = function(ref){\n            return new ObjectFactory(ref);\n        };\n\n        /**\n         * Returns a $firebaseArray based on an array of paths\n         * @param paths\n         * @returns {Function}\n         */\n        var getArray = function(paths){\n            var ref = childReference(paths);\n            /*jshint newcap: false */\n            return new ArrayFactory(ref);\n        };\n        /**\n         * Returns a $firebaseArray based on a firebase ref\n         * @param ref\n         * @returns {Function}\n         */\n        var getRefArray = function(ref){\n            return new ArrayFactory(ref);\n        };\n\n\n        return {\n            getApplicationReference: getApplicationReference,\n            setApplicationReference: setApplicationReference,\n            getApplicationAuth: getApplicationAuth,\n            childReference: childReference,\n            getObject: getObject,\n            getArray: getArray,\n            getRefArray: getRefArray,\n            getRefObject: getRefObject\n        };\n\n    }]);\n"],"sourceRoot":"/source/"}