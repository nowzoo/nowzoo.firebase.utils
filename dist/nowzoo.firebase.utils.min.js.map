{"version":3,"sources":["nowzoo.firebase.utils.min.js"],"names":["angular","module","factory","$window","$firebaseAuth","$firebaseObject","$firebaseArray","_appReference","_appAuth","setApplicationReference","url","Firebase","getApplicationReference","getApplicationAuth","onError","err","this","__securityError","log_firebase","console","log","$ref","toString","ObjectFactory","$extend","$$error","ArrayFactory","childReference","args","Array","prototype","slice","call","arguments","child","forEach","val","isArray","str","s","getObject","ref","apply","getRefObject","getArray","getRefArray"],"mappings":"AAAAA,QAAQC,OAAO,yBAA0B,aAEzCD,QAAQC,OAAO,yBACVC,QAAQ,qBAAsB,UAAW,gBAAiB,kBAAmB,iBAAkB,SAASC,EAASC,EAAeC,EAAiBC,GAC9I,YACA,IAAIC,GAAgB,KAChBC,EAAW,KAEXC,EAA0B,SAASC,GAEnC,MADAH,GAAgB,GAAIJ,GAAQQ,SAASD,IAIrCE,EAA0B,WAC1B,MAAOL,IAGPM,EAAqB,WAIrB,MAHML,KACFA,EAAWJ,EAAcQ,MAEtBJ,GAGPM,EAAU,SAASC,GACnBC,KAAKC,iBAAkB,EACnBd,EAAQe,cACRC,QAAQC,IAAIL,EAAKC,KAAKK,OAAOC,aAKjCC,EAAgBlB,EAAgBmB,SAASC,QAASX,IAElDY,EAAepB,EAAekB,SAASC,QAASX,IAOhDa,EAAiB,WACjB,GAAIC,GAAOC,MAAMC,UAAUC,MAAMC,KAAKC,WAElCC,EAAQtB,GAYZ,OAXAZ,SAAQmC,QAAQP,EAAM,SAASQ,GAC3B,GAAIpC,QAAQqC,QAAQD,GAChBpC,QAAQmC,QAAQC,EAAK,SAASE,GAC1B,GAAIC,GAAID,EAAIhB,UACZY,GAAQA,EAAMA,MAAMK,SAErB,CACH,GAAIA,GAAIH,EAAId,UACZY,GAAQA,EAAMA,MAAMK,MAGrBL,GAQPM,EAAY,WACZ,GAAIC,GAAMd,EAAee,MAAM,KAAMT,UAErC,OAAO,IAAIV,GAAckB,IAOzBE,EAAe,SAASF,GACxB,MAAO,IAAIlB,GAAckB,IAQzBG,EAAW,WACX,GAAIH,GAAMd,EAAee,MAAM,KAAMT,UAErC,OAAO,IAAIP,GAAae,IAOxBI,EAAc,SAASJ,GACvB,MAAO,IAAIf,GAAae,GAI5B,QACI7B,wBAAyBA,EACzBH,wBAAyBA,EACzBI,mBAAoBA,EACpBc,eAAgBA,EAChBa,UAAWA,EACXI,SAAUA,EACVC,YAAaA,EACbF,aAAcA","file":"nowzoo.firebase.utils.min.js","sourcesContent":["angular.module('nowzoo.firebase.utils', ['firebase']);\n\nangular.module('nowzoo.firebase.utils')\n    .factory('firebaseUtilities', [\"$window\", \"$firebaseAuth\", \"$firebaseObject\", \"$firebaseArray\", function($window, $firebaseAuth, $firebaseObject, $firebaseArray){\n        'use strict';\n        var _appReference = null;\n        var _appAuth = null;\n\n        var setApplicationReference = function(url){\n            _appReference = new $window.Firebase(url);\n            return _appReference;\n        };\n\n        var getApplicationReference = function(){\n            return _appReference;\n        };\n\n        var getApplicationAuth = function(){\n            if (! _appAuth){\n                _appAuth = $firebaseAuth(getApplicationReference());\n            }\n            return _appAuth;\n        };\n\n        var onError = function(err){\n            this.__securityError = true;\n            if ($window.log_firebase){\n                console.log(err, this.$ref().toString());\n            }\n        };\n\n\n        var ObjectFactory = $firebaseObject.$extend({$$error: onError});\n\n        var ArrayFactory = $firebaseArray.$extend({$$error: onError});\n\n        /**\n         * Returns the a child firebase reference based on an array of paths\n         * @param paths\n         * @returns {{}}\n         */\n        var childReference = function(){\n            var args = Array.prototype.slice.call(arguments);\n\n            var child = getApplicationReference();\n            angular.forEach(args, function(val){\n                if (angular.isArray(val)){\n                    angular.forEach(val, function(str){\n                        var s = str.toString();\n                        child = child.child(s);\n                    });\n                } else {\n                    var s = val.toString();\n                    child = child.child(s);\n                }\n            });\n            return child;\n        };\n\n        /**\n         * Returns a $firebaseObject based on an array of paths\n         * @param paths\n         * @returns {Function}\n         */\n        var getObject = function(){\n            var ref = childReference.apply(null, arguments);\n            /*jshint newcap: false */\n            return new ObjectFactory(ref);\n        };\n        /**\n         * Returns a $firebaseObject based on a firebase ref\n         * @param ref\n         * @returns {Function}\n         */\n        var getRefObject = function(ref){\n            return new ObjectFactory(ref);\n        };\n\n        /**\n         * Returns a $firebaseArray based on an array of paths\n         * @param paths\n         * @returns {Function}\n         */\n        var getArray = function(){\n            var ref = childReference.apply(null, arguments);\n            /*jshint newcap: false */\n            return new ArrayFactory(ref);\n        };\n        /**\n         * Returns a $firebaseArray based on a firebase ref\n         * @param ref\n         * @returns {Function}\n         */\n        var getRefArray = function(ref){\n            return new ArrayFactory(ref);\n        };\n\n\n        return {\n            getApplicationReference: getApplicationReference,\n            setApplicationReference: setApplicationReference,\n            getApplicationAuth: getApplicationAuth,\n            childReference: childReference,\n            getObject: getObject,\n            getArray: getArray,\n            getRefArray: getRefArray,\n            getRefObject: getRefObject\n        };\n\n    }]);\n"],"sourceRoot":"/source/"}